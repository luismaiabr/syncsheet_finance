var NetworkClient=function(){this.get=function(o){return new Promise((e,i)=>{var t=new XMLHttpRequest;t.open("GET",o,!0),t.onload=function(){200<=this.status&&this.status<300?e(JSON.parse(t.responseText)):i(t.responseText)},t.onerror=function(){i(t.statusText)},t.send()})},this.post=function(o,n){return new Promise((e,i)=>{var t=new XMLHttpRequest;t.open("POST",o,!0),t.setRequestHeader("Content-Type","application/json"),t.onload=function(){200<=this.status&&this.status<300?e(JSON.parse(t.responseText)):i(t.responseText)},t.onerror=function(){i(t.statusText)},t.send(JSON.stringify(n))})},this.delete=function(o){return new Promise((e,i)=>{var t=new XMLHttpRequest;t.open("DELETE",o,!0),t.onload=function(){(200<=this.status&&this.status<300?e:i)()},t.onerror=function(){i()},t.send()})}},CookieClient=function(){this.set=function(e,i,t){var o;config.isPopUp?window.opener.postMessage([e,i,t],"*"):((o=new Date).setTime(o.getTime()+24*t*60*60*1e3),o="expires="+o.toUTCString(),document.cookie=e+"="+i+";"+o+";path=/;SameSite=Lax")},this.delete=function(e){var i=new Date;i.setTime(i.getTime()-2);i="expires="+i.toUTCString();document.cookie=e+"=;"+i+";path=/;SameSite=Lax"},this.get=function(e){for(var i=e+"=",t=decodeURIComponent(document.cookie).split(";"),o=0;o<t.length;o++){for(var n=t[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return""}},LogClient=function(){this.server_log=function(e){data={webkey:config.website_key,log:e},fetch("https://admin.chirpyweb.com/v1/websites/logs/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{console.log("Success:",e)}).catch(e=>{console.error("Error:",e)})},this.console_log=function(e,i="log",t=""){switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":console.error(e,t);break;default:console.log(e)}},this.log=function(e,i="log"){config.server_logging_enabled&&this.server_log(e),config.console_logging_enabled&&this.console_log(e,i)}},PopUpWindow=function(){var t=this,o=new CookieClient;t.open=function(){var e=window.innerHeight/2-250,i=window.innerWidth/2-250;window.open("https://"+t.getDomain()+".chirpyweb.com/v1/websites/register-service-worker/?webkey="+config.website_key,config.popupWindowName,"scrollbars=yes, width=500, height=500, top="+e+", left="+i).focus()},t.getDomain=function(){if(parseDomain=window.location.host.split("."),parseDomain.length<=2)return parseDomain[0];var e=parseDomain[1];return e.length<=2?parseDomain[0]:e},t.close=function(){config.isPopUp&&window.close()},t.sendMessage=function(e,i,t=90){config.isPopUp&&window.opener.postMessage([e,i,t],"*")},t.receiveMessage=function(){window.addEventListener("message",function(e){var i=e.data,t=i[0],e=i[1],i=i[2];o.set(t,e,i),"subscription_id"==t&&localStorage.setItem(t,e,i)})}},PromptClient=function(){var o=this,n=new NetworkClient,t=new CookieClient;o.addCss=function(){var e=document.head,i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href="https://admin.chirpyweb.com/static/css/prompt.css",e.appendChild(i)},o.retrieve_prompt=function(e,i,t){n.post("https://admin.chirpyweb.com/v1/websites/sdk-prompt/",{website_key:config.website_key,prompt_type:e,is_safari:i}).then(e=>{o.show_prompt(e.template,t)})},o.removePrompt=function(e){document.getElementById(e).remove()},o.action_button=function(e,i,t){document.getElementById(e).addEventListener("click",function(){o.removePrompt(i),t()})},o.show_prompt=function(e,i){document.querySelector("body").insertAdjacentHTML("afterend",e),o.action_button("cw-allow","cw-prompt",function(){i()}),o.action_button("cw-block","cw-prompt",function(){t.set("cw_prompt_showed",!0,30)})},o.retrieve_gdpr=function(){n.post("https://admin.chirpyweb.com/v1/websites/sdk-prompt/",{website_key:config.website_key,prompt_type:"gdpr"}).then(e=>{o.show_gdpr(e.template)})},o.show_gdpr=function(e){document.querySelector("body").insertAdjacentHTML("afterend",e),o.action_button("cw-allow-gdpr","cw-gdpr",function(){t.set("cw_gdpr_showed",!0,3650)}),o.action_button("cw-block-gdpr","cw-gdpr",function(){t.set("cw_gdpr_showed",!0,3650)})},o.retrieve_bell=function(i){n.post("https://admin.chirpyweb.com/v1/websites/sdk-prompt/",{website_key:config.website_key,prompt_type:"bell"}).then(e=>{o.show_bell(e.template,i)})},o.show_bell=function(e,i){document.querySelector("body").insertAdjacentHTML("afterend",e),subscribe=document.getElementById("subscribe"),unsubscribe=document.getElementById("unsubscribe"),bellToggle=document.getElementById("cw-bell-toggle"),document.getElementById("cw-bell").addEventListener("click",function(){document.getElementById("cw-bell-popover").hidden=!document.getElementById("cw-bell-popover").hidden,localStorage.getItem("subscription_id")&&!localStorage.getItem("cw_unsubscribed")&&"default"!=Notification.permission?(subscribe.style.display="none",unsubscribe.style.display="block"):(subscribe.style.display="block",unsubscribe.style.display="none")}),subscribe.addEventListener("click",function(){"granted"==Notification.permission?n.post("https://admin.chirpyweb.com/v1/websites/unsubscribe-sdk/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),is_active:!0}).then(e=>{localStorage.removeItem("cw_unsubscribed"),bellToggle.innerHTML=e.status,bellToggle.hidden=!1,setTimeout(function(){bellToggle.hidden=!0},2e3)}):i()}),unsubscribe.addEventListener("click",function(){n.post("https://admin.chirpyweb.com/v1/websites/unsubscribe-sdk/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),is_active:!1}).then(e=>{localStorage.setItem("cw_unsubscribed",!0),bellToggle.innerHTML=e.status,bellToggle.hidden=!1,setTimeout(function(){bellToggle.hidden=!0},2e3)})})}},TrackEventClient=function(){var e=this,o=new NetworkClient,n=new CoreSDK,t=new CookieClient;e.event=function(e,i){var t=localStorage.getItem("subscription_id");t&&(data={website_key:config.website_key,category:e,value:i},n.isSafari?data.safari=t:data.non_safari=t,o.post("https://admin.chirpyweb.com/v1/subscribers/event/",data).then(e=>{console.log(e)}))},e.trackPage=function(){e.event("last-seen",null),e.event("url-visited",window.location.href),e.setCookie()},e.setCookie=function(){var e=new URL(location).searchParams,i=e.get("alert");i&&t.set("cw_notify_alert",i,.1);e=e.get("id");e&&t.set("cw_notify_id",e,.1)}},TopicClient=function(){var i=this,s=new NetworkClient,e=new PopUpWindow;i.retrieve=function(){config.is_topic_enabled?s.post("https://admin.chirpyweb.com/v1/topics/sdk-theme/",{website_key:config.website_key}).then(e=>{i.showDialog(e.template)}).then(()=>{e.close()}):e.close()},i.showDialog=function(e){var i=document.querySelector("body"),t=document.createElement("div");t.innerHTML=e,t.id="cw-topics",i.appendChild(t);var o=[],n=document.getElementById("subscribe");t.addEventListener("mouseover",function(){document.querySelectorAll("input:checked[name='topics']").length?n.disabled=!1:n.disabled=!0}),n.addEventListener("click",function(){document.getElementsByName("topics").forEach((e,i)=>{e.checked&&o.push(e.value)}),s.post("https://admin.chirpyweb.com/v1/topics/subscribe/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),topics:o}).then(e=>{console.log(e)}),t.remove()}),document.getElementById("cancel").addEventListener("click",function(){t.remove()})}},EcommerceClient=function(){var n=this,i=new CookieClient,o=new NetworkClient,t=new LogClient;n.api=function(){return config.is_shopify?"https://admin.chirpyweb.com/v1/shopify":config.is_woo_commerce?"https://admin.chirpyweb.com/v1/wp":void 0},n.getWooProduct=function(i){try{var e=document.getElementsByClassName("sku");o.post(document.location.origin+"/wp-json/cw/v1/product_data/",{sku:e[0].textContent}).then(e=>{n.getPopup(e,i)})}catch(e){t.log(log="[ChirpyWeb] Product not found "+e,type="log")}},n.getShopifyProduct=function(i){try{o.post("https://admin.chirpyweb.com/v1/shopify/product_data/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),product_id:ShopifyAnalytics.meta.product.id,variant_id:ShopifyAnalytics.meta.selectedVariantId}).then(e=>{n.getPopup(e,i)})}catch(e){t.log(log="[ChirpyWeb] Product not found "+e,type="log")}},n.getPopup=function(i,t){o.post(n.api()+"/sdk/popup/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),sku:i.sku,product_id:i.product_id,variant_id:i.variant_id}).then(e=>{i.stock?n.showPriceDrop(i,e.price_drop_template,t):n.showBackInStock(i,e.back_in_stock_template,t)})},n.showBackInStock=function(e,i,t){var o=i.replace("[product-name]",e.product_name),i=document.querySelector("#cw-price-drop");i&&i.remove();i=document.querySelector("#cw-back-in-stock");i&&i.remove(),document.querySelector("body").insertAdjacentHTML("afterend",o),e.product_image&&(document.getElementById("cw-back-in-stock-product-img").src=e.product_image),document.querySelector("#cw-back-in-stock-min").onclick=function(){document.getElementById("cw-back-in-stock").classList.toggle("open")},document.getElementById("cw-back-in-stock-btn").addEventListener("click",function(){"granted"!=Notification.permission?(is_wp_notify_me_clicked=!0,is_back_in_stock=!0,sku=e.sku,t()):n.sendWooCommerceAlerts(e,!0,!1)})},n.showPriceDrop=function(e,i,t){var o=i.replace("[product-name]",e.product_name),i=document.querySelector("#cw-back-in-stock");i&&i.remove();i=document.querySelector("#cw-price-drop");i&&i.remove(),document.querySelector("body").insertAdjacentHTML("afterend",o),e.product_image&&(document.getElementById("cw-price-drop-product-img").src=e.product_image),document.querySelector("#cw-price-drop-min").onclick=function(){document.getElementById("cw-price-drop").classList.toggle("open")},document.getElementById("cw-price-drop-btn").addEventListener("click",function(){"granted"!=Notification.permission?(is_wp_notify_me_clicked=!0,is_price_drop=!0,sku=e.sku,t()):n.sendWooCommerceAlerts(e,!1,!0)})},n.sendWooCommerceAlerts=function(e,i,t){o.post(n.api()+"/sdk/product-alert/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),sku:e.sku,product_id:e.product_id,variant_id:e.variant_id,is_price_drop:t,is_back_in_stock:i}).then(e=>{e.is_back_in_stock_enabled&&(document.getElementById("cw-back-in-stock-msg").innerHTML="<p>"+e.back_in_stock_success_message+"</p>"),e.is_price_drop_enabled&&(document.getElementById("cw-price-drop-msg").innerHTML="<p>"+e.price_drop_success_message+"</p>")})},n.cart=function(){o.post(n.api()+"/sdk/cart/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),cart_id:i.get("cart")}).then(e=>{console.log(e)})},n.checkout=function(){var e=new URL(location).searchParams;o.post(n.api()+"/sdk/checkout/",{website_key:config.website_key,subscription_id:localStorage.getItem("subscription_id"),checkout_token:Shopify.checkout?Shopify.checkout.token:null,notify_alert:i.get("cw_notify_alert")||e.get("alert"),notify_id:i.get("cw_notify_id")||e.get("id")}).then(e=>{console.log(e)})},n.add_to_cart=function(){try{d=document.getElementsByName("add"),d[0].onclick=()=>{setTimeout(()=>{n.cart()},1e3)}}catch(e){t.log(log="[ChirpyWeb] cart not found "+e,type="log")}}},SafariClient=function(){var t=this,o=new NetworkClient,n=new TopicClient(config),s=new EcommerceClient,r=new CookieClient,c=new PopUpWindow;t.nativeNotificationPermission=function(){var i=!1,e=window.safari.pushNotification.permission(config.safariOldWebPushId);e.deviceToken&&(i=!0,config.safariOldWebPushId.includes("pushmonkey")&&o.post("https://admin.chirpyweb.com/v1/apns/delete-gpm-subscriber/",{token:e.deviceToken,web_push_id:config.safariOldWebPushId})),window.safari.pushNotification.requestPermission(config.safariEndpointURL,config.safariWebPushId,{url:window.location.href},function(e){console.log(e),"granted"==e.permission&&t.sendSubscriptionToServer(e.deviceToken,i)})},t.sendSubscriptionToServer=function(e,i=!1){data={website_key:config.website_key,token:e,from_another_platform:i},config.page_tracking_enabled&&(data.url=window.location.href),o.post("https://admin.chirpyweb.com/v1/subscribers/safari/",data).then(e=>{r.set("subscription_id",e.subscription_id,3650),config.isPopUp||localStorage.setItem("subscription_id",e.subscription_id),c.sendMessage("subscription_id",e.subscription_id,3650)}).then(()=>{is_wp_notify_me_clicked&&(s.sendWooCommerceAlerts(sku,is_back_in_stock,is_price_drop),is_wp_notify_me_clicked=!1,is_back_in_stock=!1,is_price_drop=!1,sku=""),n.retrieve()})}},NonSafariClient=function(){var t=this,o=new NetworkClient,n=new TopicClient,s=new EcommerceClient,r=new LogClient,c=new CookieClient,a=new PopUpWindow;t.nativeNotificationPermission=function(){r.log("[ChirpyWeb] asking push notification native prompt"),Notification.requestPermission().then(e=>{r.log("[ChirpyWeb] requesting push notification native prompt"),"granted"==e&&(r.log("[ChirpyWeb] granted push notification native prompt"),t.subscribeUser())})},t.urlB64ToUint8Array=function(e){e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=window.atob(e),i=new Uint8Array(t.length);return i.map((e,i)=>t.charCodeAt(i))},t.subscribeUser=function(){var i=!1;r.log("[ChirpyWeb] getting subscription info"),navigator.serviceWorker.getRegistrations().then(e=>{registration=e[0],registration.pushManager.getSubscription().then(e=>{e&&(r.log("[ChirpyWeb] unsubscribing old subscription info"),e.unsubscribe(),i=!0)}).then(()=>{registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.urlB64ToUint8Array(config.vapid_pub_key)}).then(e=>{r.log("[ChirpyWeb] got push notification subscription"),t.sendSubscriptionToServer(e,i)})})})},t.sendSubscriptionToServer=function(e,i=!1){r.log("[ChirpyWeb] sending push notification subscription to server");i={website_key:config.website_key,subscription:e,from_another_platform:i};config.page_tracking_enabled&&(i.url=window.location.href),o.post("https://admin.chirpyweb.com/v1/subscribers/non-safari/",i).then(e=>{r.log("[ChirpyWeb] got subscription id"),c.set("subscription_id",e.subscription_id,3650),config.isPopUp||localStorage.setItem("subscription_id",e.subscription_id),a.sendMessage("subscription_id",e.subscription_id,3650)}).then(()=>{is_wp_notify_me_clicked&&(r.log("[ChirpyWeb] sending woo com data"),s.sendWooCommerceAlerts(sku,is_back_in_stock,is_price_drop),is_wp_notify_me_clicked=!1,is_back_in_stock=!1,is_price_drop=!1,sku=""),r.log("[ChirpyWeb] asking for topic selection"),n.retrieve()})}},CoreSDK=function(){var o=this,n=new CookieClient,i=new PromptClient,e=(new NetworkClient,new SafariClient),t=new NonSafariClient,s=new EcommerceClient,r=new LogClient,c=new PopUpWindow;o.isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4)),o.isDesktop=!o.isMobile,o.isSafari="safari"in window,o.registerServiceWorker=function(){r.log(log="[ChirpyWeb] Requesting to Install Service Worker",type="log"),"serviceWorker"in navigator?navigator.serviceWorker.register(config.service_worker_path,{scope:config.service_worker_scope}).then(function(e){r.log(log="[ChirpyWeb] Service Worker Registered with scope: "+e.scope,type="log"),config.isServiceWorkerInstalled=!0}).catch(function(e){r.log(log="[ChirpyWeb] Service Worker Registration failed: "+e,type="error"),config.isServiceWorkerInstalled=!1}):(r.log(log="[ChirpyWeb] Service worker is not supported.",type="warn"),config.isServiceWorkerInstalled=!1)},o.requestNotificationPermission=function(e){if(n.get("cw_prompt_showed")||n.get("subscription_id"))return r.log(log="[ChirpyWeb] Prompt already shown",type="log"),void c.close();r.log(log="[ChirpyWeb] Requesting to show push notification prompt",type="log"),!config.isPushPermissionGranted&&e.has_custom?o.customNotificationPermission():o.isSafari?config.is_safari_enabled&&o.customNotificationPermission():config.isServiceWorkerInstalled?t.nativeNotificationPermission():c.open()},o.requestPopUpNotificationPermission=function(){n.get("cw_prompt_showed")||n.get("subscription_id")?(r.log(log="[ChirpyWeb] Prompt already shown",type="log"),c.close()):(r.log(log="[ChirpyWeb] Requesting to show push notification prompt",type="log"),o.isSafari?o.customNotificationPermission():t.nativeNotificationPermission())},o.nativeNotificationPermission=function(){if(n.get("cw_prompt_showed")||n.get("subscription_id"))return r.log(log="[ChirpyWeb] Prompt already shown",type="log"),void c.close();r.log(log="[ChirpyWeb] Requesting to native prompt",type="log"),config.isServiceWorkerInstalled?(o.isSafari?e:t).nativeNotificationPermission():c.open()},o.customNotificationPermission=function(){if(n.get("cw_prompt_showed")||n.get("subscription_id"))return r.log(log="[ChirpyWeb] Prompt already shown",type="log"),void c.close();o.isDesktop&&config.desktop_prompt.enabled?(r.log(log="[ChirpyWeb] Requesting to desktop prompt",type="log"),i.retrieve_prompt("desktop",o.isSafari,function(){o.nativeNotificationPermission()})):o.isMobile&&config.mobile_prompt.enabled&&(r.log(log="[ChirpyWeb] Requesting to mobile prompt",type="log"),i.retrieve_prompt("mobile",o.isSafari,function(){o.nativeNotificationPermission()}))},o.no_of_visits=function(e,i){r.log(log="[ChirpyWeb] Requesting to show prompt after "+e+" no of visits",type="log");var t=n.get("cw_no_of_visits");t?(t=parseInt(t)+1,n.set("cw_no_of_visits",t,90),t>=parseInt(e)&&o.requestNotificationPermission(i)):n.set("cw_no_of_visits",1,90)},o.getProduct=function(){var e;r.log(log="[ChirpyWeb] Requesting to get E-com product",type="log"),config.is_woo_commerce&&s.getWooProduct(function(){o.nativeNotificationPermission()}),config.is_shopify&&(s.cart(),s.checkout(),s.add_to_cart(),(e=document.querySelector("variant-radios"))&&(e.onclick=function(){setTimeout(()=>{s.getShopifyProduct(function(){o.nativeNotificationPermission()})},100)}),s.getShopifyProduct(function(){o.nativeNotificationPermission()}))},o.initializeGDPR=function(){switch(r.log(log="[ChirpyWeb] Requesting to GDPR",type="log"),config.gdpr_prompt.start_mode){case"OPL":i.retrieve_gdpr();break;case"TD":setTimeout(()=>{i.retrieve_gdpr()},1e3*parseInt(config.gdpr_prompt.start_mode_value));break;case"NOV":var e=n.get("cw_no_of_visits_gdpr");e?(e=parseInt(e)+1,n.set("cw_no_of_visits_gdpr",e,90),e>=parseInt(config.gdpr_prompt.start_mode_value)&&i.retrieve_gdpr()):n.set("cw_no_of_visits_gdpr",1,90);break;case"MJSC":try{document.getElementById(config.gdpr_prompt.start_mode_value).onclick=function(e){i.retrieve_gdpr()}}catch(e){r.log(msg=e,type="error")}break;case"SURLS":location.href==config.gdpr_prompt.start_mode_value&&i.retrieve_gdpr();break;default:i.retrieve_gdpr()}},o.initializeState=function(e){switch(r.log(log="[ChirpyWeb] Initializing with "+e.start_mode,type="log"),e.start_mode){case"OPL":o.requestNotificationPermission(e);break;case"TD":setTimeout(()=>{o.requestNotificationPermission(e)},1e3*parseInt(e.start_mode_value));break;case"NOV":o.no_of_visits(e.start_mode_value,e);break;case"MJSC":try{document.getElementById(e.start_mode_value).onclick=function(e){o.nativeNotificationPermission()}}catch(e){r.log(msg=e,type="error")}break;case"SURLS":location.href==e.start_mode_value&&o.requestNotificationPermission(e);break;default:o.requestNotificationPermission(e)}},o.initialize=function(){r.log(log="[ChirpyWeb] Process Initialed!",type="log"),i.addCss(),config.isPopUp||!config.gdpr_prompt.enabled||n.get("cw_gdpr_showed")||o.initializeGDPR(),config.isPopUp||!config.bell.enabled||o.isSafari&&!config.is_safari_enabled||i.retrieve_bell(function(){o.nativeNotificationPermission()}),o.registerServiceWorker(),config.isPopUp?o.requestPopUpNotificationPermission():(o.isSafari&&!config.is_safari_enabled||(o.isMobile?o.initializeState(config.mobile_prompt):o.initializeState(config.desktop_prompt)),o.getProduct()),c.receiveMessage()}};const config = {
  API_SERVER: "https://admin.chirpyweb.com",
  website_key: "NRQK6TMXYFA1J7ZU2",
  page_tracking_enabled: 0,
  console_logging_enabled: 0,
  server_logging_enabled: 0,
  service_worker_path: "/sw-cw.js",
  service_worker_scope: "/",
  vapid_pub_key: "BPT_tn_DGIISl-oE9bSmnmJ7NxuT0ebkIUUtWNRpmzqks_zKR7jq7Gv1BLY19oHynsxD3A5VWd4k9FfE6yQVtb4",
  is_safari_enabled: 1,
  safariWebPushId: "web.com.chirpyweb.NRQK6TMXYFA1J7ZU2",
  safariOldWebPushId: "None",
  safariEndpointURL: "https://admin.chirpyweb.com/push",
  gdpr_prompt: {
    enabled: 0,
    start_mode: "OPL",
    start_mode_value: "0",
  },
  mobile_prompt: {
    enabled: 1,
    has_custom: 0,
    start_mode: "OPL",
    start_mode_value: "0",
  },
  desktop_prompt: {
    enabled: 1,
    has_custom: 1,
    start_mode: "OPL",
    start_mode_value: "0",
  },
  bell: {
    enabled: 0,
  },
  is_topic_enabled: 0,
  is_woo_commerce: 0,
  is_shopify: 0,
  popupWindowName: "Subscribing...",
  isServiceWorkerInstalled: true
};

config.isPopUp = config.popupWindowName == window.name
config.isPushPermissionGranted = Notification.permission == "granted"
var is_wp_notify_me_clicked = false;
var is_back_in_stock = false;
var is_price_drop = false;
var sku = '';

window._coreSDK = new CoreSDK();
window._trackEvent = new TrackEventClient();
window._coreSDK.initialize();
window._trackEvent.trackPage();
